steps:

- task: UseDotNet@2
  displayName: 'Use .NET Core sdk'
  inputs:
    packageType: sdk
    version: 2.x
    installationPath: $(Agent.ToolsDirectory)/dotnet

- script: dotnet restore 
  displayName: Restore Dependencies

- script: dotnet publish src/Owlvey.Falcon.Authority.Presentation/Owlvey.Falcon.Authority.Presentation.csproj --no-restore -o src/Owlvey.Falcon.Authority.Presentation/bin/Publish
  displayName: Publish 

- bash: |
    pwd    
    ls src/Owlvey.Falcon.Authority.Presentation

- bash: |        
    ls /home/vsts/work/
    

- task: Docker@2
  displayName: build publish docker
  inputs:
    containerRegistry: 'Owlvey Docker Connection'
    repository: owlvey/authority
    Dockerfile: scr/Owlvey.Falcon.Authority.Presentation/Dockerfile
    buildContext: scr/Owlvey.Falcon.Authority.Presentation/bin/Publish
    tags: |
     $(Build.BuildId)
     latest
